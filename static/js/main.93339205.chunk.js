(this["webpackJsonpshopping-cart-react"]=this["webpackJsonpshopping-cart-react"]||[]).push([[0],{101:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);a(64),a(65),a(66);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=a(25),m=a(8),u=a(3),d=a(5),p=a(55),f=a.n(p).a.create({baseURL:"http://api.seekproduct.com"}),E="/api/category/list",g="/api/category/search/?order_by=-id",b=function(e){return"/api/products/".concat(e,"/details")},h="/api/auth/register",N="/user/login",v="/user/logout",y="/api/auth/change_pass",O="/api/auth/profile",j="/api/auth/profile",w="/api/user/cart/view-cart",k="/api/user/cart/add-to-cart",x="/api/user/cart/update-cart",_="/api/user/cart/remove-from-cart",C="/api/user/cart/clear",R=function(e){return f.get(O,{headers:{Authorization:"JWT ".concat(e)}})},S=function(e,t){var a=Object(d.a)({},t);return f.put(j,a,{headers:{Authorization:"JWT ".concat(e)}})},T=a(22),P=a.n(T),A=function(e){return function(t){R(e).then((function(e){t({type:"GET_USER_PROFILE",payload:{profile:e.data}})})).catch((function(e){return console.log({err:e})}))}},L=function(e){return function(t){(function(e){return f.post(h,e)})(e).then((function(e){t({type:"REGISTER_OK",payload:{success:e.data}})})).catch((function(e){console.log(e.response.data),t({type:"REGISTER_FAILED",payload:{error:e.response.data}})}))}},I=function(e,t){return function(a){(function(e,t){var a={email:e,password:t};return f.post(N,a)})(e,t).then((function(e){a({type:"LOGIN_OK",payload:{token:e.data.token}}),G(e.data.token),a(A(e.data.token))})).catch((function(e){a({type:"LOGIN_FAILED",payload:{error:e.response.data}})}))}},D=function(e){return function(t){(function(e){return f.get(v,{headers:{Authorization:"JWT ".concat(e)}})})(e).then((function(e){F(),t({type:"LOGOUT"})})).catch(console.log)}},U=function(e,t){var a={old_password:t.oldPassword,new_password:t.newPassword,confirm_password:t.confirmPassword};return function(t){(function(e,t){return f.put(y,t,{headers:{Authorization:"JWT ".concat(e)}})})(e,a).then((function(e){t({type:"UPDATE_PASSWORD_OK"})})).catch((function(e){console.log({err:e}),t({type:"UPDATE_PASSWORD_FAILED",payload:{error:e.response.data}})}))}},F=function(){localStorage.getItem("user-token")&&localStorage.removeItem("user-token")},G=function(e){localStorage.setItem("user-token",e)},M=function(){return localStorage.getItem("user-token")},H=r.a.memo((function(e){var t=Object(u.d)((function(e){return e.cartReducer})),a=Object(u.d)((function(e){return e.userReducer})),n=Object(u.d)((function(e){return e.authReducer})),c=Object(u.c)(),l=Object(i.g)();return r.a.createElement("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark fixed-top p-2 p-md-0"},r.a.createElement("div",{className:"container-fluid container-lg"},r.a.createElement(m.b,{className:"navbar-brand",to:"/"},"Shopping Now"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("ul",{className:"navbar-nav collapse navbar-collapse d-md-flex justify-content-md-end",id:"collapsibleNavbar"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{className:"nav-link",activeClassName:"active",to:"/products"},r.a.createElement("i",{className:"fa fa-lg fa-shopping-bag mr-2"}),"Shop")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{className:"nav-link",exact:!0,activeClassName:"active",to:"/cart"},r.a.createElement("i",{className:"fa fa-lg fa-shopping-cart mr-2"}),"My cart",r.a.createElement("span",{className:"badge badge-pill badge-warning ml-1"},t.cart_detail.length||""))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{className:"nav-link",exact:!0,activeClassName:"active",to:"/user"},r.a.createElement("i",{className:"fa fa-lg fa-user mr-2"}),"My account")),n.isLogin&&r.a.createElement("li",{className:"nav-item",title:a.id},r.a.createElement("a",{className:"nav-link",onClick:function(){confirm("Are you sure to logout ?")&&(c(D(n.token)),l.push("/login"))}},r.a.createElement("i",{className:"fa fa-lg fa-power-off mr-2"}),a.firstName)))))})),W=a(10),K=a(11),z=a(13),J=a(12),q=a(14),B=function(e){return function(t,a){t({type:"PRODUCT_PENDING"});var n=a().paginationReducer,r=n.currentPage,c=n.pageSize;(function(e,t,a){var n={key_word:"",category:"All"===e?"":e};return f.post(g,n,{params:{page:t,page_size:a}})})(e,r,c).then((function(e){t({type:"SEARCH_PRODUCTS",payload:e.data.results}),t({type:"CREATE_PAGINATION",payload:{page:e.data}})})).catch((function(e){return console.log({err:e})}))}},$=function(e){return function(t){t({type:"PRODUCT_PENDING"}),function(e){return f.get(b(e))}(e).then((function(e){t({type:"DETAIL_PRODUCT",payload:{details:e.data}})}))}},V=function(e,t,a){var n={product:t,amount:a};return f.post(k,n,{headers:{Authorization:"JWT ".concat(e)}})},Q=function(e){return f.get(C,{headers:{Authorization:"JWT ".concat(e)}})},X=function(e){return function(t){t({type:"FETCH_CART",payload:{cart:te()}}),te(),function(e){return f.get(w,{headers:{Authorization:"JWT ".concat(e)}})}(e).then((function(e){t({type:"FETCH_CART",payload:{cart:e.data}}),ae(e.data)})).catch(console.log)}},Y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(n){V(e,t,a).then((function(e){n({type:"ADD_TO_CART",payload:{cart:e.data}})})).catch(console.log)}},Z=function(e,t,a){return function(n){(function(e,t,a){var n={product:t,amount:parseInt(a)};return f.post(x,n,{headers:{Authorization:"JWT ".concat(e)}})})(e,t,a).then((function(e){console.log("Updated from API"),n({type:"UPDATE_CART_ITEM",payload:{cart:e.data}})})).catch(console.log)}},ee=function(e,t){return function(a){(function(e,t){var a={product:t};return f.post(_,a,{headers:{Authorization:"JWT ".concat(e)}})})(e,t).then((function(e){console.log("Deleting from API"),a({type:"DELETE_CART_ITEM",payload:{cart:e.data}})})).catch(console.log)}},te=function(){return JSON.parse(localStorage.getItem("user-cart"))||[]},ae=function(e){localStorage.setItem("user-cart",JSON.stringify(e))},ne=function(){return function(e){f.get(E).then((function(t){e({type:"FETCH_CATEGORIES",payload:t.data})})).catch(console.log)}},re=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(z.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.fetchCategories()},a.componentDidUpdate=function(e){var t=a.props,n=t.match.params,r=t.categories;e.categories.isLoading!==r.isLoading&&a.props.changeSelectedCategory(n.category)},a}return Object(q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props.categories.categories,a=this.props.match.params.category,n=t.map((function(t){var n,c=t.id,l=t.name;return r.a.createElement("li",{className:"nav-item text-nowrap",key:c},r.a.createElement(m.b,{className:a===l?"nav-link active":"nav-link border",to:"/products/".concat((n=l,n.replace(/\s/g,"-"))),onClick:function(){return e.props.changeSelectedCategory(l)}},l))}));return!this.props.categories.isLoading&&r.a.createElement("ul",{className:"nav nav-pills nav-justified",id:"category-bar"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link"},"Filter by:")),n)}}]),t}(n.PureComponent),ce=Object(u.b)((function(e){return{categories:e.categoriesReducer}}),(function(e){return{changeSelectedCategory:function(t){return e((a=t,function(e,t){e({type:"CHANGE_SELECTED_CATEGORY",payload:{category:t().categoriesReducer.categories.find((function(e){return e.name===a}))}}),e({type:"GO_TO_PAGE",payload:{page_number:1}})}));var a},fetchCategories:function(){return e(ne())}}}))(Object(i.h)(re)),le=a(7),oe=function(e){return r.a.createElement(r.a.Fragment,null,function(){for(var t=Math.round(2*e.rating)/2,a=[],n=0;n<5;n++)t>=1?a.push(r.a.createElement("i",{key:n,className:"fa fa-star"})):.5===t?a.push(r.a.createElement("i",{key:n,className:"fa fa-star-half-o"})):a.push(r.a.createElement("i",{key:n,className:"fa fa-star-o"})),t--;return a}())},se=a(106),ie=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(le.a)(t,2),c=a[0],l=a[1],o=Object(u.c)(),s=Object(u.d)((function(e){return e.cartReducer})),m=Object(u.d)((function(e){return e.authReducer})),d=Object(i.g)();return r.a.createElement(se.a,{md:"3",sm:"4",xs:"6",className:"mb-4"},r.a.createElement("div",{className:"card card-product shadow",onClick:function(){d.push("/products/".concat(e.id,"/detail"))}},r.a.createElement("img",{title:e.name,onError:function(){return l(!0)},className:"card-img-top img-fluid border-bottom",src:!c&&e.image?e.image:"https://via.placeholder.com/250?text=placeholder",alt:"Missing image"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-text font-weight-bold",id:"product-name",title:e.id},e.name),r.a.createElement("p",{className:"card-text font-weight-bolder text-muted mb-1"},"$",e.price.toLocaleString("en-EN")),r.a.createElement("p",{className:"card-text mb-1"},e.category.map((function(e){return e.name})).join(", ")),r.a.createElement("p",{title:e.rating+" stars"},r.a.createElement(oe,{rating:e.rating})),r.a.createElement("button",{className:"btn btn-success",onClick:function(t){t.stopPropagation(),!m.isLogin&&d.push("/login"),console.log("PRODUCT ID",e.id),o(Y(m.token,e.id))}},r.a.createElement("i",{className:"fa mr-2 "+(s.cart_detail.find((function(t){return t.product.id===e.id}))?"fa-check":"fa-cart-plus")}),"Add to cart"))))})),me=r.a.memo((function(){return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-lg btn-danger font-weight-bold mt-1"},r.a.createElement("i",{className:"fa fa-cog fa-spin mr-2 fa-lg"}),"Loading..."))})),ue=function(e){function t(){return Object(W.a)(this,t),Object(z.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-danger btn-lg mt-1"},r.a.createElement("i",{className:"fa fa-frown-o fa-lg mr-2"}),"Empty category !"))}}]),t}(n.Component),de=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(z.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).deformatURL=function(e){return e.replace(/-/g," ")},a.isCategoryNotFound=function(){var e=a.props,t=e.match.params;return!e.categories.categories.find((function(e){return e.name===a.deformatURL(t.category)}))},a}return Object(q.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){console.log("FETCHING API");var e=this.props.match.params;this.props.searchByCategory(e.category)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match.params,n=t.categories,r=t.history;e.categories.currentSelected!==n.currentSelected&&this.props.searchByCategory(this.deformatURL(a.category)),!n.isLoading&&this.isCategoryNotFound()&&r.replace("/404")}},{key:"render",value:function(){var e=this.props.products,t=e.isLoading,a=e.products,n=this.props.categories.currentSelected,c=a.map((function(e){return r.a.createElement(ie,Object.assign({},e,{key:e.id}))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Category: ",n&&n.name),t?r.a.createElement(me,null):r.a.createElement("div",{className:"row"},c.length?c:r.a.createElement(ue,null)))}}]),t}(n.PureComponent),pe=Object(u.b)((function(e){return{products:e.productsReducer,categories:e.categoriesReducer,auth:e.authReducer}}),(function(e){return{searchByCategory:function(t){return e(B(t))}}}))(Object(i.h)(de)),fe=function(){for(var e=Object(u.c)(),t=Object(u.d)((function(e){return e.paginationReducer})),a=null===t.previous,n=null===t.next,c=[],l=function(a){var n;c.push(r.a.createElement("li",{className:"page-item"+(n=a,n===t.currentPage&&" active"),key:a},r.a.createElement("button",{className:"page-link",onClick:function(){return e(function(e){return function(t,a){var n=a().categoriesReducer.currentSelected;t({type:"GO_TO_PAGE",payload:{page_number:e}}),t(B(n.name))}}(a))}},a)))},o=1;o<=t.totalPages;o++)l(o);return r.a.createElement("div",null,r.a.createElement("ul",{className:"pagination justify-content-center"},r.a.createElement("li",{className:"page-item"+(a&&" disabled")},r.a.createElement("button",{className:"page-link",onClick:function(){return e((function(e,t){var a=t().categoriesReducer.currentSelected;e({type:"PREVIOUS_PAGE"}),e(B(a.name))}))}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),c,r.a.createElement("li",{className:"page-item"+(n&&" disabled")},r.a.createElement("button",{className:"page-link",onClick:function(){return e((function(e,t){var a=t().categoriesReducer.currentSelected;e({type:"NEXT_PAGE"}),e(B(a.name))}))}},r.a.createElement("i",{className:"fa fa-chevron-right"})))))},Ee=function(e){function t(){return Object(W.a)(this,t),Object(z.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ce,null),r.a.createElement("hr",null),r.a.createElement(pe,null),r.a.createElement("hr",null),r.a.createElement(fe,null))}}]),t}(n.Component),ge=Object(u.b)()(Ee),be=r.a.memo((function(e){return r.a.createElement("div",{className:"container-fluid container-lg py-4 mt-5"},e.children)})),he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(le.a)(t,2),r=a[0],c=a[1],l={value:r,onChange:function(e){return c(e.target.value)}};return[r,l]},Ne=function(e){var t=he("test1@gmail.com"),a=Object(le.a)(t,2),c=a[0],l=a[1],o=he("password"),s=Object(le.a)(o,2),i=s[0],d=s[1],p=Object(u.c)(),f=Object(u.d)((function(e){return e.authReducer}));Object(n.useEffect)((function(){f.isLogin&&e.history.push("/user")}),[f.isLogin]);return r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("strong",null,"You need to login first!")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{role:"form",onSubmit:function(e){e.preventDefault(),p(I(c,i))}},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto"},r.a.createElement("img",{className:"mb-3 rounded-circle",src:"https://img.icons8.com/cute-clipart/100/000000/forgot-password.png",alt:"Missing"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-user"}))),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Username",type:"text"},l,{autoFocus:!0})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-lock"}))),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Password",type:"password",onInput:function(){return f.loginError&&(f.loginError.email="")}},d))),r.a.createElement("div",{className:"error-input"},f.loginError&&f.loginError.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btn btn-lg btn-primary btn-block",value:"Sign in"}))))))),r.a.createElement("div",{className:"card-footer"},"Don't have an account! ",r.a.createElement("br",null),r.a.createElement(m.b,{to:"/signup"},"Sign Up Here"))))))},ve=function(e){var t=he("Phong"),a=Object(le.a)(t,2),c=a[0],l=a[1],o=he("To"),s=Object(le.a)(o,2),i=s[0],d=s[1],p=he("quocduby@gmail.com"),f=Object(le.a)(p,2),E=f[0],g=f[1],b=he("password"),h=Object(le.a)(b,2),N=h[0],v=h[1],y=he("password"),O=Object(le.a)(y,2),j=O[0],w=O[1],k=he("Can Tho"),x=Object(le.a)(k,2),_=x[0],C=x[1],R=Object(n.useState)(""),S=Object(le.a)(R,2),T=S[0],P=S[1],A=Object(u.c)(),I=Object(u.d)((function(e){return e.authReducer})),D=I.registerError;Object(n.useEffect)((function(){I.registerSuccess&&e.history.push("/login")}),[I.registerSuccess]);var U=function(){return P("")};return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-md-6 offset-sm-2 offset-md-3"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("strong",null,"First time with us? Sign up now!")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{role:"form",onSubmit:function(e){(e.preventDefault(),N===j)?A(L({first_name:c,last_name:i,email:E,password:N,confirm_password:j,city:_})):P("Password does not match")}},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto"},r.a.createElement("img",{className:"mb-3 rounded-circle",src:"https://img.icons8.com/bubbles/100/000000/user.png",alt:"missing"}))),r.a.createElement("div",{className:"row text-left"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: John",type:"text"},l,{autoFocus:!0,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Doe",type:"text"},d,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: example@mail.com",type:"email"},g,{required:!0})),r.a.createElement("div",{className:"error-input"},D&&D.email&&D.email[0])),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"At least 4 characters",type:"password"},v,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm password"),r.a.createElement("input",Object.assign({onBlur:U,onInput:U,className:"form-control",placeholder:"At least 4 characters",type:"password"},w,{required:!0})),r.a.createElement("div",{className:"error-input"},T)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"City (For shipping)"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Can Tho",type:"text"},C))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},r.a.createElement("i",{className:"fa fa-user-plus mr-2"}),"Sign up")),r.a.createElement("hr",{className:"mb-1"}),r.a.createElement("div",{className:"text-center"},"Or"),r.a.createElement(m.b,{to:"/login",className:"btn btn-success btn-lg btn-block"},r.a.createElement("i",{className:"fa fa-sign-in mr-2"}),"Login"))))))))))},ye=(a(95),r.a.memo((function(e){var t=e.product,a=Object(u.d)((function(e){return e.authReducer})),c=Object(n.useState)(e.amount),l=Object(le.a)(c,2),o=l[0],s=l[1],i=Object(u.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{"data-th":"Product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 d-flex align-items-center"},r.a.createElement("img",{src:t.image||"https://via.placeholder.com/150",alt:"Missing image",className:"img-fluid rounded"})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8"},r.a.createElement("h5",{className:"font-weight-bolder",title:t.name},t.name),r.a.createElement("h6",null,"Model: ",t.model)))),r.a.createElement("td",{"data-th":"Price",className:"text-center"},"$",t.price.toLocaleString("en-EN")),r.a.createElement("td",{"data-th":"Quantity",className:"text-center"},r.a.createElement("input",{type:"number",className:"form-control text-center",min:"1",value:o,onChange:function(e){return s(e.target.value)}})),r.a.createElement("td",{"data-th":"Subtotal",className:"text-center"},"$",(t.price*o).toLocaleString("en-EN")),r.a.createElement("td",{className:"actions text-center","data-th":""},r.a.createElement("button",{className:"btn btn-info btn-sm",title:"Update this item",onClick:function(){return i(Z(a.token,t.id,o))}},r.a.createElement("i",{className:"fa fa-refresh"})),r.a.createElement("button",{className:"btn btn-danger btn-sm",title:"Delete this item",onClick:function(){return i(ee(a.token,t.id))}},r.a.createElement("i",{className:"fa fa-trash-o"})))))}))),Oe=function(e){function t(){return Object(W.a)(this,t),Object(z.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.cart,n=t.auth;if(!n.isLogin)return r.a.createElement(i.a,{to:"/login"});var c=a.cart_detail.map((function(e){return r.a.createElement(ye,Object.assign({},e,{key:e.product.id}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{id:"cart",className:"table table-hover table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Subtotal"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.length?c:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5",className:"text-center text-info h3"},"Cart is empty !"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(m.b,{to:"/",className:"btn btn-warning"},r.a.createElement("i",{className:"fa fa-chevron-circle-left fa-lg mr-1"}),"Continue Shopping"),r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){confirm("Are you sure ?")&&e.props.clearCart(n.token)}},r.a.createElement("i",{className:"fa fa-times fa-lg mr-1"}),"Clear cart")),r.a.createElement("td",{colSpan:"2",className:"text-center"},r.a.createElement("strong",null,"Total $",a.total.toLocaleString("en-EN"))),r.a.createElement("td",{colSpan:"2"},r.a.createElement(m.b,{to:"/checkout",className:"btn btn-success btn-block text-white"},r.a.createElement("i",{className:"fa fa-cart-arrow-down fa-lg mr-2"}),"Checkout")))))))}}]),t}(n.Component),je=Object(u.b)((function(e){return{cart:e.cartReducer,auth:e.authReducer}}),(function(e){return{clearCart:function(t){return e(function(e){return function(t){Q(e).then((function(e){t({type:"CLEAR_CART",payload:{cart:e.data}})})).catch(console.log)}}(t))}}}))(Oe),we=a(57),ke=a.n(we),xe=r.a.memo((function(e){var t=Object(u.d)((function(e){return e.cartReducer})),a=Object(u.d)((function(e){return e.userReducer})),n=Object(u.d)((function(e){return e.authReducer}));return r.a.createElement(r.a.Fragment,null,!n.isLogin&&r.a.createElement(i.a,{to:"/login"}),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-md-6 pb-3 text-center"},r.a.createElement("img",{src:ke.a,className:"img-fluid",alt:"User Information"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",{className:"text-success font-weight-bold"},"User information"),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"First name: "),a.firstName),r.a.createElement("p",null,r.a.createElement("b",null,"Last name: "),a.lastName),r.a.createElement("p",null,r.a.createElement("b",null,"Email: "),a.email),r.a.createElement("p",null,r.a.createElement("b",null,"City: "),a.city||"Unkown"),r.a.createElement("p",null,r.a.createElement("b",null,"Total items in cart: "),t.cart_detail.length),r.a.createElement("p",null,r.a.createElement("b",null,"Total cart price: "),"$",t.total.toLocaleString("en-EN")),r.a.createElement(m.b,{to:"/update-user",className:"btn btn-lg btn-danger"},r.a.createElement("i",{className:"fa fa-wrench fa-lg mr-2"}),"Change information")))))})),_e=a(26),Ce=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(z.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:null,errorMessage:""},a.submitCard=function(e){var t=a.props,n=t.userInfo,r=t.auth;a.setState({isLoading:!0}),a.props.stripe.createToken({email:n.email}).then((function(e){console.log("STRIPE TOKEN",e),e.error?a.setState({errorMessage:e.error.message,isLoading:null}):a.props.checkoutCart(r.token,e.token.id).then((function(){console.log("CHECKED OUT"),a.setState({isLoading:!1})}))}))},a}return Object(q.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userInfo,a=e.cart,n=this.state.isLoading,c=a.paid_at;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"offset-3 col-md-6"},r.a.createElement("div",{className:"card shadow",id:"checkout"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Order Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Customer"),r.a.createElement("input",{readOnly:!0,type:"text",className:"form-control",value:t.firstName?t.firstName+" "+t.lastName:"Loading..."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{readOnly:!0,type:"email",className:"form-control",value:t.email})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-md-3 col-form-label"},"Total price:"),r.a.createElement("input",{readOnly:!0,type:"text",className:"col-md-9 form-control-plaintext font-weight-bold",value:"$"+a.total.toLocaleString("en-EN")})),r.a.createElement("hr",null),r.a.createElement("label",null,"Card information (4242424242424242)"),r.a.createElement(_e.CardElement,{hidePostalCode:!0,className:"border p-2 rounded",style:{base:{fontSize:"18px"}}}),r.a.createElement("div",{className:"text-danger font-italic font-smaller"},this.state.errorMessage),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block mt-3",onClick:this.submitCard,disabled:n||c},r.a.createElement("i",{className:"fa fa-lg mr-2 "+(null!==n?!0===n?"fa-spinner fa-spin":"fa-check":"fa-shopping-cart")}),c?"Paid successfully !":"Checkout")))))}}]),t}(n.Component),Re=Object(_e.injectStripe)(Object(u.b)((function(e){return{userInfo:e.userReducer,cart:e.cartReducer,auth:e.authReducer}}),(function(e){return{checkoutCart:function(t,a){return e(function(e,t){return function(t){return P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Q(e).then((function(e){return t({type:"CHECK_OUT_OK"}),Promise.resolve()})).catch((function(e){return console.log({err:e}),t({type:"CHECK_OUT_FAILED"}),Promise.reject(e)}));case 1:case"end":return a.stop()}}))}}(t))}}}))(Object(i.h)(Ce))),Se=function(){return r.a.createElement("div",{className:"jumbotron text-center",id:"not-found-page"},r.a.createElement("i",{className:"fa fa-frown-o text-danger"}),r.a.createElement("h1",null,"404 - Page not found"),r.a.createElement("code",null,"Please check your URL and try again!"))},Te=(a(101),function(e){var t=Object(n.useState)(e.image),a=Object(le.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{className:"col-md-4 border overflow-hidden"},r.a.createElement("div",{className:"d-flex justify-content-center mt-2 shadow"},r.a.createElement("img",{id:"prod-image",src:c||"https://place-hold.it/300",className:"img-fluid img-thumbnail",alt:"Product image"})),r.a.createElement("hr",{className:"mb-1"}),r.a.createElement("div",{className:"row px-3 d-flex justify-content-center",id:"feeds"},e.feeds.map((function(e){return r.a.createElement("div",{className:"feed border",key:e.id},r.a.createElement("img",{src:e.url,className:"img-fluid rounded",alt:"Product",onClick:function(){return l(e.url)}}))}))))}),Pe=function(e){var t=e.product,a=he(1),n=Object(le.a)(a,2),c=n[0],l=n[1],o=Object(u.d)((function(e){return e.authReducer})),s=Object(i.g)(),m=Object(u.c)(),d=function(){!o.isLogin&&s.push("/login")};return r.a.createElement("div",{className:"col-md-5 border py-2",id:"prod-info"},r.a.createElement("h3",{id:"name"},t.name),r.a.createElement(oe,{rating:t.rating}),r.a.createElement("div",null,"Tag: ",t.tag.split(",").map((function(e,t){return r.a.createElement("span",{key:t,className:"badge badge-pill badge-success mr-1"},e)}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"text-warning h2",id:"price"},"US $",t.price.toLocaleString("en-EN")),r.a.createElement("dl",null,r.a.createElement("dt",null,"Description"),r.a.createElement("dd",null,t.description)),r.a.createElement("div",null,r.a.createElement("dl",null,r.a.createElement("dt",null,"Model"),r.a.createElement("dd",null,t.model)),r.a.createElement("dl",null,r.a.createElement("dt",null,"Category"),r.a.createElement("dd",null,t.category.map((function(e){return e.name})).join(", "))),r.a.createElement("dl",null,r.a.createElement("dt",null,"Color"),r.a.createElement("dd",null,t.color))),r.a.createElement("hr",{className:"mt-n2"}),r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Quantity"),r.a.createElement("input",Object.assign({type:"number",className:"form-control text-center col-sm-2",min:"1",value:c},l)),r.a.createElement("div",{className:"col-sm-6 text-right"},r.a.createElement("button",{className:"btn btn-outline-info text-dark",type:"button"},r.a.createElement("i",{className:"fa fa-thumbs-o-up fa-lg text-primary"})," ",t.favorites)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement("button",{type:"button",className:"btn flex-grow-1 btn-lg btn-danger m-1 text-nowrap",onClick:function(){d(),m(Y(o.token,t.id,c)),s.push("/cart")}},r.a.createElement("i",{className:"fa fa-cart-arrow-down fa-lg mr-2"}),"Buy Now"),r.a.createElement("button",{type:"button",className:"btn flex-grow-1 btn-lg btn-outline-success m-1 text-nowrap",onClick:function(){d(),m(Y(o.token,t.id,c))}},r.a.createElement("i",{className:"fa fa-cart-plus fa-lg mr-2"}),"Add to Cart")))},Ae=function(e){return r.a.createElement("div",{className:"col p-0"},r.a.createElement("div",{className:"card mt-3 shadow"},r.a.createElement("div",{className:"card-header text-center bg-info p-0 overflow-hidden"},r.a.createElement("button",{className:"btn text-white font-weight-bold btn-block","data-target":"#description-body","data-toggle":"collapse"},"Click to show full description")),r.a.createElement("div",{className:"collapse hide overflow-hidden",id:"description-body"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))))},Le=function(e){var t=Object(i.g)(),a=e.products;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"mb-0 mt-3"},"Other products"),r.a.createElement("div",{className:"d-flex",id:"prod-others"},a.map((function(e){return r.a.createElement("div",{className:"card col-md-2",key:e.id,onClick:function(){return t.push("/products/".concat(e.id,"/detail"))}},r.a.createElement("img",{className:"card-img-top border-bottom",src:e.image||"https://place-hold.it/200",alt:"Product image"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text text-muted font-weight-bold"},"$",e.price.toLocaleString("en-EN"))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("button",{className:"btn btn-success"},r.a.createElement("i",{className:"fa fa-info-circle mr-2"}),"Details")))}))))},Ie=function(e){var t=e.company;return r.a.createElement("div",{className:"col-md-3 border pt-2",id:"company"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("img",{src:t.logo||"https://place-hold.it/100",className:"img-fluid img-thumbnail rounded-circle w-75",alt:""})),r.a.createElement("dl",{className:"col"},r.a.createElement("dd",null,r.a.createElement("h3",{className:"text-center"},t.store_name))),r.a.createElement("hr",null),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Address"),r.a.createElement("dd",null,t.address)),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Phone number"),r.a.createElement("dd",null,t.phone_number)),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Products"),r.a.createElement("dd",null,t.productgroup&&t.productgroup.map((function(e){return e.name})).join(", "))),r.a.createElement("hr",null),r.a.createElement("div",{className:"social-links"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-facebook-square text-info"}),t.social_link.facebook),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-instagram text-danger"}),t.social_link.instagram),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-twitter text-primary"}),t.social_link.twitter)))},De=function(e){function t(){return Object(W.a)(this,t),Object(z.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.props.detailProduct(e.id)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params;e.match.params.id!==t.id&&this.props.detailProduct(t.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.details;return t.isLoading?r.a.createElement(me,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.props.history.push("/products")}},r.a.createElement("i",{className:"fa fa-chevron-left fa-lg mr-2"}),"Back"),r.a.createElement("div",{className:"row shadow"},r.a.createElement(Te,{image:a.product.image,feeds:a.feeds}),r.a.createElement(Pe,{product:a.product}),r.a.createElement(Ie,{company:a.company})),r.a.createElement("div",{className:"row"},r.a.createElement(Ae,{description:a.product.full_description})),r.a.createElement("div",{className:"row"},r.a.createElement(Le,{products:a.other_products})))}}]),t}(n.Component),Ue=Object(u.b)((function(e){return{details:e.productsReducer.details,isLoading:e.productsReducer.isLoading}}),(function(e){return{detailProduct:function(t){return e($(t))}}}))(De),Fe=a(107),Ge=function(){var e=he(),t=Object(le.a)(e,2),a=t[0],c=t[1],l=he(),o=Object(le.a)(l,2),s=o[0],m=o[1],d=he(),p=Object(le.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)(""),b=Object(le.a)(g,2),h=b[0],N=b[1],v=Object(u.d)((function(e){return e.authReducer})),y=Object(i.g)(),O=Object(u.c)();Object(n.useEffect)((function(){v.isPasswordUpdated&&(O(D(v.token)),y.push("/login"))}),[v.isPasswordUpdated]);var j=function(){return N("")};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s===f?O(U(v.token,{oldPassword:a,newPassword:s,confirmPassword:f})):N("Password does not match")}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Old Password"),r.a.createElement(Fe.a,Object.assign({type:"password",placeholder:"Your old password"},c,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"New Password"),r.a.createElement(Fe.a,Object.assign({type:"password",placeholder:"At least 4 character"},m,{minLength:"4",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(Fe.a,Object.assign({onBlur:j,onInput:j,type:"password",placeholder:"At least 4 character"},E,{minLength:"4",required:!0})),r.a.createElement("div",{className:"error-input"},h)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-danger btn-lg btn-block"},r.a.createElement("i",{className:"fa fa-key mr-2"}),"Update password"))))))},Me=a(58),He=a.n(Me),We=function(){var e=Object(u.d)((function(e){return e.userReducer})),t=Object(u.d)((function(e){return e.authReducer})),a=Object(u.c)(),c=Object(i.g)(),l=Object(n.useRef)(null);Object(n.useEffect)((function(){l.current.value=e.email,!t.isLogin&&c.push("/login")}),[e.email,t.isLogin]);var o=he(e.firstName),s=Object(le.a)(o,2),m=s[0],d=s[1],p=he(e.lastName),f=Object(le.a)(p,2),E=f[0],g=f[1],b=he(e.city),h=Object(le.a)(b,2),N=h[0],v=h[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={firstName:m,lastName:E,city:N};a(function(e,t){var a={first_name:t.firstName,last_name:t.lastName,city:t.city};return function(t){return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(S(e,a).then((function(a){t({type:"UPDATE_PROFILE"}),t(A(e)),Promise.resolve(a)})).catch((function(e){return console.log({err:e})})));case 2:case"end":return n.stop()}}))}}(t.token,n)).then((function(e){c.push("user")}))}},r.a.createElement("div",{className:"row text-center"},r.a.createElement("img",{className:"mb-3 w-25 rounded-circle mx-auto",src:He.a,alt:"missing"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",ref:l,defaultValue:"Loading...",className:"form-control",readOnly:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: John",type:"text"},d,{autoFocus:!0,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Doe",type:"text"},g,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"City"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Can Tho",type:"text"},v))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success btn-block"},r.a.createElement("i",{className:"fa fa-pencil-square-o mr-2"}),"Update profile"))))))},Ke=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-md-6 offset-sm-2 offset-md-3"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-info text-white"},r.a.createElement("strong",null,"Update your information")),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement(We,null),r.a.createElement(Ge,null))))))};a(51),a(52);var ze=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.authReducer}));return Object(n.useEffect)((function(){t.isLogin&&e(X(t.token))}),[t.isLogin]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(be,null,r.a.createElement(i.d,null,r.a.createElement(i.a,{exact:!0,from:"/",to:"/products/All"}),r.a.createElement(i.a,{exact:!0,from:"/products",to:"/products/All"}),r.a.createElement(i.b,{path:"/products/:category",exact:!0,component:ge}),r.a.createElement(i.b,{path:"/products/:id/detail",exact:!0,component:Ue}),r.a.createElement(i.b,{path:"/login",exact:!0,component:Ne}),r.a.createElement(i.b,{path:"/signup",exact:!0,component:ve}),r.a.createElement(i.b,{path:"/cart",exact:!0,component:je}),r.a.createElement(i.b,{path:"/user",exact:!0,component:xe}),r.a.createElement(i.b,{path:"/update-user",exact:!0,component:Ke}),r.a.createElement(i.b,{path:"/checkout",exact:!0},r.a.createElement(_e.Elements,null,r.a.createElement(Re,null))),r.a.createElement(i.b,{path:"*",exact:!0,component:Se}))))},Je=a(23),qe=a(40),Be={isLoading:!0,currentSelected:{id:-1,name:"All"},categories:[{id:-1,name:"All"}]},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATEGORIES":return Object(d.a)({},e,{isLoading:!1,categories:[].concat(Object(qe.a)(Be.categories),Object(qe.a)(t.payload))});case"CHANGE_SELECTED_CATEGORY":return Object(d.a)({},e,{currentSelected:t.payload.category});default:return e}},Ve={isLoading:!0,products:[],hasError:!1,details:{feeds:[],other_products:[],product:{tag:"",name:"",rating:0,price:0,description:"",model:"",category:[],color:"",favorites:0},company:{logo:null,store_name:"",address:"",phone_number:"",productgroup:[],social_link:{facebook:"",instagram:"",twitter:""}}}},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_PENDING":return Object(d.a)({},e,{isLoading:!0});case"FETCH_PRODUCTS":case"SEARCH_PRODUCTS":return Object(d.a)({},e,{isLoading:!1,products:t.payload});case"DETAIL_PRODUCT":return Object(d.a)({},e,{isLoading:!1,details:t.payload.details});default:return e}},Xe={id:null,total:0,status:null,user:null,paid_at:null,cart_detail:[]},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CART":case"ADD_TO_CART":case"UPDATE_CART_ITEM":case"DELETE_CART_ITEM":case"CLEAR_CART":return Object(d.a)({},e,{},t.payload.cart);case"CHECK_OUT_OK":return Object(d.a)({},e,{cart_detail:[],total:0,paid_at:(new Date).toISOString()});case"CHECK_OUT_FAILED":return Object(d.a)({},e);case"LOGOUT":return Xe;default:return e}},Ze={id:null,firstName:null,lastName:null,email:null,username:null,stripeID:null,city:null},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;if(t.payload&&t.payload.profile)var a=t.payload.profile,n={id:a.id,firstName:a.first_name,lastName:a.last_name,email:a.email,username:a.username,stripeID:a.stripe_customer_id,city:a.city};switch(t.type){case"AUTH_USER":case"GET_USER_PROFILE":return Object(d.a)({},e,{},n);case"LOGOUT":return Object(d.a)({},Ze);default:return e}},tt={currentPage:1,pageSize:20,count:0,totalPages:0,next:null,previous:null},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PAGINATION":var a=t.payload.page;return Object(d.a)({},e,{count:a.count,totalPages:Math.ceil(a.count/e.pageSize),next:a.next,previous:a.previous});case"NEXT_PAGE":return Object(d.a)({},e,{currentPage:e.currentPage+1});case"PREVIOUS_PAGE":return Object(d.a)({},e,{currentPage:e.currentPage-1});case"GO_TO_PAGE":return Object(d.a)({},e,{currentPage:t.payload.page_number});default:return e}},nt={isAuthPending:!1,isPasswordUpdated:!1,token:null,isLogin:null,regiterSuccess:null,registerError:null,loginError:null,passwordError:null},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return Object(d.a)({},e,{token:t.payload.token,isLogin:!0});case"REGISTER_OK":return Object(d.a)({},e,{registerSuccess:t.payload.success});case"REGISTER_FAILED":return Object(d.a)({},e,{registerError:t.payload.error});case"LOGIN_OK":return Object(d.a)({},e,{isAuthPending:!1,isPasswordUpdated:!1,isLogin:!0,token:t.payload.token});case"LOGIN_FAILED":return Object(d.a)({},e,{loginError:t.payload.error});case"LOGOUT":return Object(d.a)({},nt);case"UPDATE_PASSWORD_OK":return Object(d.a)({},e,{isPasswordUpdated:!0});case"UPDATE_PASSWORD_FAILED":return Object(d.a)({},e,{passwordError:t.payload.error});case"TOKEN_EXPIRED":return Object(d.a)({},nt);default:return e}},ct=Object(Je.combineReducers)({categoriesReducer:$e,productsReducer:Qe,cartReducer:Ye,userReducer:et,paginationReducer:at,authReducer:rt}),lt=a(60),ot=a(61),st=Object(Je.createStore)(ct,Object(ot.composeWithDevTools)(Object(Je.applyMiddleware)(lt.a))),it=a(34);a(103);l.a.render(r.a.createElement(u.a,{store:st},r.a.createElement(m.a,null,r.a.createElement(_e.StripeProvider,{apiKey:"pk_test_7X4at47jVmUqka7N8HhdO35N"},r.a.createElement(ze,null)))),document.getElementById("root")),function(){it.initializeApp({apiKey:"AIzaSyDHdEhhWGoFJmuNMbNQ4KcjFhz8dp01kEI",authDomain:"seek-product-nextjs.firebaseapp.com",databaseURL:"https://seek-product-nextjs.firebaseio.com",projectId:"seek-product-nextjs",storageBucket:"seek-product-nextjs.appspot.com",messagingSenderId:"124533210035",appId:"1:124533210035:web:a094f0ba4388fbef1ea9c6",measurementId:"G-NP0LJ444E7"});var e=it.messaging();e.setBackgroundMessageHandler((function(e){console.log("[sw]",e)})),e.onMessage((function(e){console.log("RECEIVED",e)})),console.log("FIREBASE initialized")}(),localStorage.getItem("notification-token")||(console.log("call"),function(){var e,t;P.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("here"),a.prev=1,(e=it.messaging()).usePublicVapidKey("BMk-NokF8Qd5iXnEn2-4VdIVMc_F182oK7rQtxht8_SIebci16UapymUryPebMiTcNGhsazUNk_2cPDRIzINh4k"),a.next=6,P.a.awrap(e.requestPermission());case 6:return console.log("get token"),a.next=9,P.a.awrap(e.getToken());case 9:return t=a.sent,console.log("FB token",t),localStorage.setItem("notification-token",t),a.abrupt("return",t);case 15:a.prev=15,a.t0=a.catch(1),console.log(a.t0);case 18:case"end":return a.stop()}}),null,null,[[1,15]])}()),st.dispatch(function(){var e=M();return e?function(t){R(e).then((function(a){t({type:"AUTH_USER",payload:{profile:a.data,token:e}})})).catch((function(e){console.log({err:e}),t({type:"TOKEN_EXPIRED"}),F()}))}:{type:"TOKEN_NOT_FOUND"}}()),st.subscribe((function(){var e=st.getState().cartReducer,t=localStorage.getItem("user-cart");JSON.stringify(e)!==t&&ae(e)})),function(e){if("serviceWorker"in navigator){if(new URL("/ShoppingCart-ReactJs-Redux",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ShoppingCart-ReactJs-Redux","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},57:function(e,t,a){e.exports=a.p+"static/media/user.63352dbf.png"},58:function(e,t,a){e.exports=a.p+"static/media/user.552c272e.jpg"},63:function(e,t,a){e.exports=a(105)},65:function(e,t,a){},95:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.93339205.chunk.js.map