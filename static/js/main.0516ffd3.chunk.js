(this["webpackJsonpshopping-cart-react"]=this["webpackJsonpshopping-cart-react"]||[]).push([[0],{130:function(e,t,a){},136:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);a(79),a(80),a(81),a(82);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var i=a(8),m=a(3),u=a(149),d=a(144),p=a(145),f=a(146),E=a(26),g=a.n(E),b=a(70),h=a.n(b),N=window.location.hostname,v="http://api.seekproduct.com",y=h.a.create({baseURL:"localhost"===N?v:"https://cors-anywhere.herokuapp.com/".concat(v)}),O="/api/category/list",j="/api/category/search/?order_by=-id",w=function(e){return"/api/products/".concat(e,"/details")},k="/api/auth/register",x="/user/login",_="/user/logout",C="/api/auth/change_pass",R="/api/auth/profile",S="/api/auth/profile",P="/api/user/cart/view-cart",T="/api/user/cart/add-to-cart",A="/api/user/cart/update-cart",L="/api/user/cart/remove-from-cart",I="/api/user/cart/clear",D=function(e,t,a){var n={product:t,amount:a};return y.post(T,n,{headers:{Authorization:"JWT ".concat(e)}})},U=function(e){return y.get(I,{headers:{Authorization:"JWT ".concat(e)}})},G=function(e){return function(t){t({type:"FETCH_CART",payload:{cart:W()}}),W(),function(e){return y.get(P,{headers:{Authorization:"JWT ".concat(e)}})}(e).then((function(e){t({type:"FETCH_CART",payload:{cart:e.data}}),z(e.data)})).catch(console.log)}},F=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(n){n({type:"CART_PENDING"}),D(e,t,a).then((function(e){n({type:"ADD_TO_CART",payload:{cart:e.data}})})).catch(console.log)}},M=function(e,t,a){return function(n){n({type:"CART_PENDING"}),function(e,t,a){var n={product:t,amount:parseInt(a)};return y.post(A,n,{headers:{Authorization:"JWT ".concat(e)}})}(e,t,a).then((function(e){console.log("Updated from API"),n({type:"UPDATE_CART_ITEM",payload:{cart:e.data}})})).catch(console.log)}},H=function(e,t){return function(a){a({type:"CART_PENDING"}),function(e,t){var a={product:t};return y.post(L,a,{headers:{Authorization:"JWT ".concat(e)}})}(e,t).then((function(e){console.log("Deleting from API"),a({type:"DELETE_CART_ITEM",payload:{cart:e.data}})})).catch(console.log)}},W=function(){return JSON.parse(localStorage.getItem("user-cart"))||[]},z=function(e){localStorage.setItem("user-cart",JSON.stringify(e))},K=r.a.memo((function(e){var t=e.product,a=Object(m.d)((function(e){return e.authReducer})),c=Object(m.d)((function(e){return e.cartReducer})),l=Object(n.useState)(e.amount),o=Object(i.a)(l,2),s=o[0],u=o[1],d=Object(m.c)();Object(n.useEffect)((function(){u(e.amount)}),[e.amount]);return r.a.createElement("tr",null,r.a.createElement("td",{"data-th":"Product",title:t.name},r.a.createElement("img",{src:t.image||"https://via.placeholder.com/50",className:"img-fluid",alt:""})),r.a.createElement("td",{"data-th":"Quantity",className:"text-center"},r.a.createElement("input",{type:"number",className:"form-control text-center p-0 pr-1 pl-n1 m-0",min:"1",value:s,onChange:function(e){return u(e.target.value)}})),r.a.createElement("td",{"data-th":"Subtotal",className:"text-center"},"$",(t.price*s).toLocaleString("en-EN")),r.a.createElement("td",{className:"actions text-center","data-th":""},r.a.createElement("button",{className:"btn btn-info btn-sm",title:"Update this item",onClick:function(){return d(M(a.token,t.id,s))}},r.a.createElement("i",{className:"fa fa-refresh"+(c.isPending?" fa-spin":"")})),r.a.createElement("button",{className:"btn btn-danger btn-sm",title:"Delete this item",onClick:function(){confirm("Are you sure to delete ?")&&d(H(a.token,t.id))}},r.a.createElement("i",{className:"fa fa-trash-o"}))))})),J=a(30),q=a(9);var B=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(m.d)((function(e){return e.cartReducer})),o=function(){return c(!a)},s=Object(J.g)();return Object(n.useEffect)((function(){s.listen((function(){return a&&o()}))}),[a]),r.a.createElement("div",{id:"mini-cart"},r.a.createElement(u.a,{placement:"auto",target:"bs-mini-cart",isOpen:a,toggle:o},r.a.createElement(d.a,null,r.a.createElement(p.a,{size:"sm",id:"tbl-mini-cart",className:"pb-0 mb-0",striped:!0,hover:!0,responsive:!0,borderless:!0},r.a.createElement("thead",{className:"thead-inverse"},r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,l.cart_detail.length?l.cart_detail.map((function(e){return r.a.createElement(K,Object.assign({},e,{key:e.product.id}))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"text-center text-danger h5 font-italic"},"Empty cart !"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("strong",null,"Total: $",l.total.toLocaleString("en-EN"))),r.a.createElement("td",{colSpan:"2",className:"text-right p-0"},r.a.createElement(q.b,{to:"/cart"},r.a.createElement(f.a,{color:"warning",className:"text-nowrap my-2",size:"sm",block:!0},r.a.createElement("i",{className:"fa fa-shopping-basket mr-1"}),"Go to cart")))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"p-0"},r.a.createElement(q.b,{to:"/checkout"},r.a.createElement(f.a,{color:"success",block:!0},r.a.createElement("i",{className:"fa fa-cart-arrow-down fa-lg mr-2"}),"Checkout")))))))))},$=a(7),V=function(e){return y.get(R,{headers:{Authorization:"JWT ".concat(e)}})},Q=function(e,t){var a=Object($.a)({},t);return y.put(S,a,{headers:{Authorization:"JWT ".concat(e)}})},X=function(e){return function(t){V(e).then((function(e){t({type:"GET_USER_PROFILE",payload:{profile:e.data}})})).catch((function(e){return console.log({err:e})}))}},Y=function(e){return function(t){(function(e){return y.post(k,e)})(e).then((function(e){t({type:"REGISTER_OK",payload:{success:e.data}})})).catch((function(e){console.log(e.response.data),t({type:"REGISTER_FAILED",payload:{error:e.response.data}})}))}},Z=function(e,t){return function(a){(function(e,t){var a={email:e,password:t};return y.post(x,a)})(e,t).then((function(e){a({type:"LOGIN_OK",payload:{token:e.data.token}}),ne(e.data.token),a(X(e.data.token))})).catch((function(e){a({type:"LOGIN_FAILED",payload:{error:e.response.data}})}))}},ee=function(e){return function(t){(function(e){return y.get(_,{headers:{Authorization:"JWT ".concat(e)}})})(e).then((function(e){ae(),t({type:"LOGOUT"})})).catch(console.log)}},te=function(e,t){var a={old_password:t.oldPassword,new_password:t.newPassword,confirm_password:t.confirmPassword};return function(t){(function(e,t){return y.put(C,t,{headers:{Authorization:"JWT ".concat(e)}})})(e,a).then((function(e){t({type:"UPDATE_PASSWORD_OK"})})).catch((function(e){console.log({err:e}),t({type:"UPDATE_PASSWORD_FAILED",payload:{error:e.response.data}})}))}},ae=function(){localStorage.getItem("user-token")&&localStorage.removeItem("user-token")},ne=function(e){localStorage.setItem("user-token",e)},re=function(){return localStorage.getItem("user-token")},ce=r.a.memo((function(e){var t=Object(m.d)((function(e){return e.cartReducer})),a=Object(m.d)((function(e){return e.userReducer})),n=Object(m.d)((function(e){return e.authReducer})),c=Object(m.c)(),l=Object(J.g)();return r.a.createElement("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark fixed-top p-2 p-md-0"},r.a.createElement("div",{className:"container-fluid container-lg"},r.a.createElement(q.b,{className:"navbar-brand",to:"/"},"Shopping Now"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavbar"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("ul",{className:"navbar-nav collapse navbar-collapse d-md-flex justify-content-md-end",id:"collapsibleNavbar"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(q.c,{className:"nav-link",activeClassName:"active",to:"/products"},r.a.createElement("i",{className:"fa fa-lg fa-shopping-bag mr-2"}),"Shop")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",id:"bs-mini-cart"},r.a.createElement("i",{className:"fa fa-lg fa-shopping-cart mr-2"}),"My cart",r.a.createElement("span",{className:"badge badge-pill badge-warning ml-1"},t.cart_detail.length||"")),r.a.createElement(B,null)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(q.c,{className:"nav-link",exact:!0,activeClassName:"active",to:"/user"},r.a.createElement("i",{className:"fa fa-lg fa-user mr-2"}),"My account")),n.isLogin&&r.a.createElement("li",{className:"nav-item",title:a.id},r.a.createElement("a",{className:"nav-link",onClick:function(){confirm("Are you sure to logout ?")&&(c(ee(n.token)),l.push("/login"))}},r.a.createElement("i",{className:"fa fa-lg fa-power-off mr-2"}),a.firstName)))))})),le=a(16),oe=a(17),se=a(19),ie=a(18),me=a(20),ue=function(e){return function(t,a){t({type:"PRODUCT_PENDING"});var n=a().paginationReducer,r=n.currentPage,c=n.pageSize;(function(e,t,a){var n={key_word:"",category:"All"===e?"":e};return y.post(j,n,{params:{page:t,page_size:a}})})(e,r,c).then((function(e){t({type:"SEARCH_PRODUCTS",payload:e.data.results}),t({type:"CREATE_PAGINATION",payload:{page:e.data}})})).catch((function(e){return console.log({err:e})}))}},de=function(e){return function(t){t({type:"PRODUCT_PENDING"}),function(e){return y.get(w(e))}(e).then((function(e){t({type:"DETAIL_PRODUCT",payload:{details:e.data}})}))}},pe=function(){return function(e){y.get(O).then((function(t){e({type:"FETCH_CATEGORIES",payload:t.data})})).catch(console.log)}},fe=function(e){function t(){var e,a;Object(le.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(se.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.fetchCategories()},a.componentDidUpdate=function(e){var t=a.props,n=t.match.params,r=t.categories;e.categories.isLoading!==r.isLoading&&a.props.changeSelectedCategory(n.category)},a}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.categories.categories,a=this.props.match.params.category,n=t.map((function(t){var n,c=t.id,l=t.name;return r.a.createElement("li",{className:"nav-item text-nowrap",key:c},r.a.createElement(q.b,{className:a===l?"nav-link active":"nav-link border",to:"/products/".concat((n=l,n.replace(/\s/g,"-"))),onClick:function(){return e.props.changeSelectedCategory(l)}},l))}));return!this.props.categories.isLoading&&r.a.createElement("ul",{className:"nav nav-pills nav-justified",id:"category-bar"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link"},"Filter by:")),n)}}]),t}(n.PureComponent),Ee=Object(m.b)((function(e){return{categories:e.categoriesReducer}}),(function(e){return{changeSelectedCategory:function(t){return e((a=t,function(e,t){e({type:"CHANGE_SELECTED_CATEGORY",payload:{category:t().categoriesReducer.categories.find((function(e){return e.name===a}))}}),e({type:"GO_TO_PAGE",payload:{page_number:1}})}));var a},fetchCategories:function(){return e(pe())}}}))(Object(J.h)(fe)),ge=function(e){return r.a.createElement(r.a.Fragment,null,function(){for(var t=Math.round(2*e.rating)/2,a=[],n=0;n<5;n++)t>=1?a.push(r.a.createElement("i",{key:n,className:"fa fa-star"})):.5===t?a.push(r.a.createElement("i",{key:n,className:"fa fa-star-half-o"})):a.push(r.a.createElement("i",{key:n,className:"fa fa-star-o"})),t--;return a}())},be=a(147),he=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(m.c)(),s=Object(m.d)((function(e){return e.cartReducer})),u=Object(m.d)((function(e){return e.authReducer})),d=Object(J.g)();return r.a.createElement(be.a,{md:"3",sm:"4",xs:"6",className:"mb-4"},r.a.createElement("div",{className:"card card-product shadow",onClick:function(){d.push("/products/".concat(e.id,"/detail"))}},r.a.createElement("img",{title:e.name,onError:function(){return l(!0)},className:"card-img-top img-fluid border-bottom",src:!c&&e.image?e.image:"https://via.placeholder.com/250?text=placeholder",alt:"Missing image"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-text font-weight-bold",id:"product-name",title:e.id},e.name),r.a.createElement("p",{className:"card-text font-weight-bolder text-muted mb-1"},"$",e.price.toLocaleString("en-EN")),r.a.createElement("p",{className:"card-text mb-1"},e.category.map((function(e){return e.name})).join(", ")),r.a.createElement("p",{title:e.rating+" stars"},r.a.createElement(ge,{rating:e.rating})),r.a.createElement("button",{className:"btn btn-success",onClick:function(t){t.stopPropagation(),!u.isLogin&&d.push("/login"),o(F(u.token,e.id))}},r.a.createElement("i",{className:"fa mr-2 "+(s.cart_detail.find((function(t){return t.product.id===e.id}))?"fa-check":"fa-cart-plus")}),"Add to cart"))))})),Ne=r.a.memo((function(){return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-lg btn-danger font-weight-bold mt-1"},r.a.createElement("i",{className:"fa fa-cog fa-spin mr-2 fa-lg"}),"Loading..."))})),ve=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-danger btn-lg mt-1"},r.a.createElement("i",{className:"fa fa-frown-o fa-lg mr-2"}),"Empty category !"))}}]),t}(n.Component),ye=function(e){function t(){var e,a;Object(le.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(se.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(r)))).deformatURL=function(e){return e.replace(/-/g," ")},a.isCategoryNotFound=function(){var e=a.props,t=e.match.params;return!e.categories.categories.find((function(e){return e.name===a.deformatURL(t.category)}))},a}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){console.log("FETCHING API");var e=this.props.match.params;this.props.searchByCategory(e.category)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.match.params,n=t.categories,r=t.history;e.categories.currentSelected!==n.currentSelected&&this.props.searchByCategory(this.deformatURL(a.category)),!n.isLoading&&this.isCategoryNotFound()&&r.replace("/404")}},{key:"render",value:function(){var e=this.props.products,t=e.isLoading,a=e.products,n=this.props.categories.currentSelected,c=a.map((function(e){return r.a.createElement(he,Object.assign({},e,{key:e.id}))}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Category: ",n&&n.name),t?r.a.createElement(Ne,null):r.a.createElement("div",{className:"row"},c.length?c:r.a.createElement(ve,null)))}}]),t}(n.PureComponent),Oe=Object(m.b)((function(e){return{products:e.productsReducer,categories:e.categoriesReducer,auth:e.authReducer}}),(function(e){return{searchByCategory:function(t){return e(ue(t))}}}))(Object(J.h)(ye)),je=function(){for(var e=Object(m.c)(),t=Object(m.d)((function(e){return e.paginationReducer})),a=null===t.previous,n=null===t.next,c=[],l=function(a){var n;c.push(r.a.createElement("li",{className:"page-item"+(n=a,n===t.currentPage&&" active"),key:a},r.a.createElement("button",{className:"page-link",onClick:function(){return e(function(e){return function(t,a){var n=a().categoriesReducer.currentSelected;t({type:"GO_TO_PAGE",payload:{page_number:e}}),t(ue(n.name))}}(a))}},a)))},o=1;o<=t.totalPages;o++)l(o);return r.a.createElement("div",null,r.a.createElement("ul",{className:"pagination justify-content-center"},r.a.createElement("li",{className:"page-item"+(a&&" disabled")},r.a.createElement("button",{className:"page-link",onClick:function(){return e((function(e,t){var a=t().categoriesReducer.currentSelected;e({type:"PREVIOUS_PAGE"}),e(ue(a.name))}))}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),c,r.a.createElement("li",{className:"page-item"+(n&&" disabled")},r.a.createElement("button",{className:"page-link",onClick:function(){return e((function(e,t){var a=t().categoriesReducer.currentSelected;e({type:"NEXT_PAGE"}),e(ue(a.name))}))}},r.a.createElement("i",{className:"fa fa-chevron-right"})))))},we=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ee,null),r.a.createElement("hr",null),r.a.createElement(Oe,null),r.a.createElement("hr",null),r.a.createElement(je,null))}}]),t}(n.Component),ke=Object(m.b)()(we),xe=r.a.memo((function(e){return r.a.createElement("div",{className:"container-fluid container-lg py-4 mt-5"},e.children)})),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(i.a)(t,2),r=a[0],c=a[1],l={value:r,onChange:function(e){return c(e.target.value)}};return[r,l]},Ce=function(e){var t=_e("test1@gmail.com"),a=Object(i.a)(t,2),c=a[0],l=a[1],o=_e("password"),s=Object(i.a)(o,2),u=s[0],d=s[1],p=Object(m.c)(),f=Object(m.d)((function(e){return e.authReducer}));Object(n.useEffect)((function(){f.isLogin&&e.history.push("/user")}),[f.isLogin]);return r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-sm-5"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("strong",null,"You need to login first!")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{role:"form",onSubmit:function(e){e.preventDefault(),p(Z(c,u))}},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto"},r.a.createElement("img",{className:"mb-3 rounded-circle",src:"https://img.icons8.com/cute-clipart/100/000000/forgot-password.png",alt:"Missing"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-user"}))),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Username",type:"text"},l,{autoFocus:!0})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("span",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-lock"}))),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Password",type:"password",onInput:function(){return f.loginError&&(f.loginError.email="")}},d))),r.a.createElement("div",{className:"error-input"},f.loginError&&f.loginError.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btn btn-lg btn-primary btn-block",value:"Sign in"}))))))),r.a.createElement("div",{className:"card-footer"},"Don't have an account! ",r.a.createElement("br",null),r.a.createElement(q.b,{to:"/signup"},"Sign Up Here"))))))},Re=function(e){var t=_e("Phong"),a=Object(i.a)(t,2),c=a[0],l=a[1],o=_e("To"),s=Object(i.a)(o,2),u=s[0],d=s[1],p=_e("quocduby@gmail.com"),f=Object(i.a)(p,2),E=f[0],g=f[1],b=_e("password"),h=Object(i.a)(b,2),N=h[0],v=h[1],y=_e("password"),O=Object(i.a)(y,2),j=O[0],w=O[1],k=_e("Can Tho"),x=Object(i.a)(k,2),_=x[0],C=x[1],R=Object(n.useState)(""),S=Object(i.a)(R,2),P=S[0],T=S[1],A=Object(m.c)(),L=Object(m.d)((function(e){return e.authReducer})),I=L.registerError;Object(n.useEffect)((function(){L.registerSuccess&&e.history.push("/login")}),[L.registerSuccess]);var D=function(){return T("")};return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-md-6 offset-sm-2 offset-md-3"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("strong",null,"First time with us? Sign up now!")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{role:"form",onSubmit:function(e){(e.preventDefault(),N===j)?A(Y({first_name:c,last_name:u,email:E,password:N,confirm_password:j,city:_})):T("Password does not match")}},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mx-auto"},r.a.createElement("img",{className:"mb-3 rounded-circle",src:"https://img.icons8.com/bubbles/100/000000/user.png",alt:"missing"}))),r.a.createElement("div",{className:"row text-left"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: John",type:"text"},l,{autoFocus:!0,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Doe",type:"text"},d,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: example@mail.com",type:"email"},g,{required:!0})),r.a.createElement("div",{className:"error-input"},I&&I.email&&I.email[0])),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"At least 4 characters",type:"password"},v,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm password"),r.a.createElement("input",Object.assign({onBlur:D,onInput:D,className:"form-control",placeholder:"At least 4 characters",type:"password"},w,{required:!0})),r.a.createElement("div",{className:"error-input"},P)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"City (For shipping)"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Can Tho",type:"text"},C))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block"},r.a.createElement("i",{className:"fa fa-user-plus mr-2"}),"Sign up")),r.a.createElement("hr",{className:"mb-1"}),r.a.createElement("div",{className:"text-center"},"Or"),r.a.createElement(q.b,{to:"/login",className:"btn btn-success btn-lg btn-block"},r.a.createElement("i",{className:"fa fa-sign-in mr-2"}),"Login"))))))))))},Se=(a(130),r.a.memo((function(e){var t=e.product,a=Object(m.d)((function(e){return e.authReducer})),c=Object(m.d)((function(e){return e.cartReducer})),l=Object(n.useState)(e.amount),o=Object(i.a)(l,2),s=o[0],u=o[1],d=Object(m.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{"data-th":"Product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 d-flex align-items-center"},r.a.createElement("img",{src:t.image||"https://via.placeholder.com/150",alt:"Missing image",className:"img-fluid rounded"})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8"},r.a.createElement("h5",{className:"font-weight-bolder",title:t.name},t.name),r.a.createElement("h6",null,"Model: ",t.model)))),r.a.createElement("td",{"data-th":"Price",className:"text-center"},"$",t.price.toLocaleString("en-EN")),r.a.createElement("td",{"data-th":"Quantity",className:"text-center"},r.a.createElement("input",{type:"number",className:"form-control text-center",min:"1",value:s,onChange:function(e){return u(e.target.value)}})),r.a.createElement("td",{"data-th":"Subtotal",className:"text-center"},"$",(t.price*s).toLocaleString("en-EN")),r.a.createElement("td",{className:"actions text-center","data-th":""},r.a.createElement("button",{className:"btn btn-info btn-sm",title:"Update this item",onClick:function(){return d(M(a.token,t.id,s))}},r.a.createElement("i",{className:"fa fa-refresh"+(c.isPending?" fa-spin":"")})),r.a.createElement("button",{className:"btn btn-danger btn-sm",title:"Delete this item",onClick:function(){return d(H(a.token,t.id))}},r.a.createElement("i",{className:"fa fa-trash-o"})))))}))),Pe=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.cart,n=t.auth;if(!n.isLogin)return r.a.createElement(J.a,{to:"/login"});var c=a.cart_detail.map((function(e){return r.a.createElement(Se,Object.assign({},e,{key:e.product.id}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{id:"cart",className:"table table-hover table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Subtotal"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,c.length?c:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5",className:"text-center text-info h3"},"Cart is empty !"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(q.b,{to:"/",className:"btn btn-warning"},r.a.createElement("i",{className:"fa fa-chevron-circle-left fa-lg mr-1"}),"Continue Shopping"),r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){confirm("Are you sure ?")&&e.props.clearCart(n.token)}},r.a.createElement("i",{className:"fa fa-times fa-lg mr-1"}),"Clear cart")),r.a.createElement("td",{colSpan:"2",className:"text-center"},r.a.createElement("strong",null,"Total $",a.total.toLocaleString("en-EN"))),r.a.createElement("td",{colSpan:"2"},r.a.createElement(q.b,{to:"/checkout",className:"btn btn-success btn-block text-white"},r.a.createElement("i",{className:"fa fa-cart-arrow-down fa-lg mr-2"}),"Checkout")))))))}}]),t}(n.Component),Te=Object(m.b)((function(e){return{cart:e.cartReducer,auth:e.authReducer}}),(function(e){return{clearCart:function(t){return e(function(e){return function(t){t({type:"CART_PENDING"}),U(e).then((function(e){t({type:"CLEAR_CART",payload:{cart:e.data}})})).catch(console.log)}}(t))}}}))(Pe),Ae=a(73),Le=a.n(Ae),Ie=r.a.memo((function(e){var t=Object(m.d)((function(e){return e.cartReducer})),a=Object(m.d)((function(e){return e.userReducer})),n=Object(m.d)((function(e){return e.authReducer}));return r.a.createElement(r.a.Fragment,null,!n.isLogin&&r.a.createElement(J.a,{to:"/login"}),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-md-6 pb-3 text-center"},r.a.createElement("img",{src:Le.a,className:"img-fluid",alt:"User Information"})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h2",{className:"text-success font-weight-bold"},"User information"),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"First name: "),a.firstName),r.a.createElement("p",null,r.a.createElement("b",null,"Last name: "),a.lastName),r.a.createElement("p",null,r.a.createElement("b",null,"Email: "),a.email),r.a.createElement("p",null,r.a.createElement("b",null,"City: "),a.city||"Unkown"),r.a.createElement("p",null,r.a.createElement("b",null,"Total items in cart: "),t.cart_detail.length),r.a.createElement("p",null,r.a.createElement("b",null,"Total cart price: "),"$",t.total.toLocaleString("en-EN")),r.a.createElement(q.b,{to:"/update-user",className:"btn btn-lg btn-danger"},r.a.createElement("i",{className:"fa fa-wrench fa-lg mr-2"}),"Change information")))))})),De=a(32),Ue=function(e){function t(){var e,a;Object(le.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(se.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:null,errorMessage:""},a.submitCard=function(e){var t=a.props,n=t.userInfo,r=t.auth;a.setState({isLoading:!0}),a.props.stripe.createToken({email:n.email}).then((function(e){console.log("STRIPE TOKEN",e),e.error?a.setState({errorMessage:e.error.message,isLoading:null}):a.props.checkoutCart(r.token,e.token.id).then((function(){console.log("CHECKED OUT"),a.setState({isLoading:!1})}))}))},a}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userInfo,a=e.cart,n=this.state.isLoading,c=a.paid_at;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"offset-3 col-md-6"},r.a.createElement("div",{className:"card shadow",id:"checkout"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("h4",{className:"text-center font-weight-bold"},"Order Information")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Customer"),r.a.createElement("input",{readOnly:!0,type:"text",className:"form-control",value:t.firstName?t.firstName+" "+t.lastName:"Loading..."})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{readOnly:!0,type:"email",className:"form-control",value:t.email||"Loading..."})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-md-3 col-form-label"},"Total price:"),r.a.createElement("input",{readOnly:!0,type:"text",className:"col-md-9 form-control-plaintext font-weight-bold",value:"$"+a.total.toLocaleString("en-EN")})),r.a.createElement("hr",null),r.a.createElement("label",null,"Card information (4242424242424242)"),r.a.createElement(De.CardElement,{hidePostalCode:!0,className:"border p-2 rounded",style:{base:{fontSize:"18px"}}}),r.a.createElement("div",{className:"text-danger font-italic font-smaller"},this.state.errorMessage),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block mt-3",onClick:this.submitCard,disabled:n||c},r.a.createElement("i",{className:"fa fa-lg mr-2 "+(null!==n?!0===n?"fa-spinner fa-spin":"fa-check":"fa-shopping-cart")}),c?"Paid successfully !":"Checkout")))))}}]),t}(n.Component),Ge=Object(De.injectStripe)(Object(m.b)((function(e){return{userInfo:e.userReducer,cart:e.cartReducer,auth:e.authReducer}}),(function(e){return{checkoutCart:function(t,a){return e(function(e,t){return function(t){return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:U(e).then((function(e){return t({type:"CHECK_OUT_OK"}),Promise.resolve()})).catch((function(e){return console.log({err:e}),t({type:"CHECK_OUT_FAILED"}),Promise.reject(e)}));case 1:case"end":return a.stop()}}))}}(t))}}}))(Object(J.h)(Ue))),Fe=function(){return r.a.createElement("div",{className:"jumbotron text-center",id:"not-found-page"},r.a.createElement("i",{className:"fa fa-frown-o text-danger"}),r.a.createElement("h1",null,"404 - Page not found"),r.a.createElement("code",null,"Please check your URL and try again!"))},Me=(a(136),function(e){var t=Object(n.useState)(e.image),a=Object(i.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{className:"col-md-4 border overflow-hidden"},r.a.createElement("div",{className:"d-flex justify-content-center mt-2 shadow"},r.a.createElement("img",{id:"prod-image",src:c||"https://place-hold.it/300",className:"img-fluid img-thumbnail",alt:"Product image"})),r.a.createElement("hr",{className:"mb-1"}),r.a.createElement("div",{className:"row px-3 d-flex justify-content-center",id:"feeds"},e.feeds.map((function(e){return r.a.createElement("div",{className:"feed border",key:e.id},r.a.createElement("img",{src:e.url,className:"img-fluid rounded",alt:"Product",onClick:function(){return l(e.url)}}))}))))}),He=function(e){var t=e.product,a=_e(1),n=Object(i.a)(a,2),c=n[0],l=n[1],o=Object(m.d)((function(e){return e.authReducer})),s=Object(J.g)(),u=Object(m.c)(),d=function(){!o.isLogin&&s.push("/login")};return r.a.createElement("div",{className:"col-md-5 border py-2",id:"prod-info"},r.a.createElement("h3",{id:"name"},t.name),r.a.createElement(ge,{rating:t.rating}),r.a.createElement("div",null,"Tag: ",t.tag.split(",").map((function(e,t){return r.a.createElement("span",{key:t,className:"badge badge-pill badge-success mr-1"},e)}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"text-warning h2",id:"price"},"US $",t.price.toLocaleString("en-EN")),r.a.createElement("dl",null,r.a.createElement("dt",null,"Description"),r.a.createElement("dd",null,t.description)),r.a.createElement("div",null,r.a.createElement("dl",null,r.a.createElement("dt",null,"Model"),r.a.createElement("dd",null,t.model)),r.a.createElement("dl",null,r.a.createElement("dt",null,"Category"),r.a.createElement("dd",null,t.category.map((function(e){return e.name})).join(", "))),r.a.createElement("dl",null,r.a.createElement("dt",null,"Color"),r.a.createElement("dd",null,t.color))),r.a.createElement("hr",{className:"mt-n2"}),r.a.createElement("form",{className:"form-inline"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Quantity"),r.a.createElement("input",Object.assign({type:"number",className:"form-control text-center col-sm-2",min:"1",value:c},l)),r.a.createElement("div",{className:"col-sm-6 text-right"},r.a.createElement("button",{className:"btn btn-outline-info text-dark",type:"button"},r.a.createElement("i",{className:"fa fa-thumbs-o-up fa-lg text-primary"})," ",t.favorites)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement("button",{type:"button",className:"btn flex-grow-1 btn-lg btn-danger m-1 text-nowrap",onClick:function(){d(),u(F(o.token,t.id,c)),s.push("/cart")}},r.a.createElement("i",{className:"fa fa-cart-arrow-down fa-lg mr-2"}),"Buy Now"),r.a.createElement("button",{type:"button",className:"btn flex-grow-1 btn-lg btn-outline-success m-1 text-nowrap",onClick:function(){d(),u(F(o.token,t.id,c))}},r.a.createElement("i",{className:"fa fa-cart-plus fa-lg mr-2"}),"Add to Cart")))},We=function(e){return r.a.createElement("div",{className:"col p-0"},r.a.createElement("div",{className:"card mt-3 shadow"},r.a.createElement("div",{className:"card-header text-center bg-info p-0 overflow-hidden"},r.a.createElement("button",{className:"btn text-white font-weight-bold btn-block","data-target":"#description-body","data-toggle":"collapse"},"Click to show full description")),r.a.createElement("div",{className:"collapse hide overflow-hidden",id:"description-body"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.description}})))))},ze=function(e){var t=Object(J.g)(),a=e.products;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"mb-0 mt-3"},"Other products"),r.a.createElement("div",{className:"d-flex",id:"prod-others"},a.map((function(e){return r.a.createElement("div",{className:"card col-md-2",key:e.id,onClick:function(){return t.push("/products/".concat(e.id,"/detail"))}},r.a.createElement("img",{className:"card-img-top border-bottom",src:e.image||"https://place-hold.it/200",alt:"Product image"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-title"},e.name),r.a.createElement("p",{className:"card-text text-muted font-weight-bold"},"$",e.price.toLocaleString("en-EN"))),r.a.createElement("div",{className:"card-footer"},r.a.createElement("button",{className:"btn btn-success"},r.a.createElement("i",{className:"fa fa-info-circle mr-2"}),"Details")))}))))},Ke=function(e){var t=e.company;return r.a.createElement("div",{className:"col-md-3 border pt-2",id:"company"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("img",{src:t.logo||"https://place-hold.it/100",className:"img-fluid img-thumbnail rounded-circle w-75",alt:""})),r.a.createElement("dl",{className:"col"},r.a.createElement("dd",null,r.a.createElement("h3",{className:"text-center"},t.store_name))),r.a.createElement("hr",null),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Address"),r.a.createElement("dd",null,t.address)),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Phone number"),r.a.createElement("dd",null,t.phone_number)),r.a.createElement("dl",{className:"col"},r.a.createElement("dt",null,"Products"),r.a.createElement("dd",null,t.productgroup&&t.productgroup.map((function(e){return e.name})).join(", "))),r.a.createElement("hr",null),r.a.createElement("div",{className:"social-links"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-facebook-square text-info"}),t.social_link.facebook),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-instagram text-danger"}),t.social_link.instagram),r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-2x fa-fw fa-twitter text-primary"}),t.social_link.twitter)))},Je=function(e){function t(){return Object(le.a)(this,t),Object(se.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(me.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.props.detailProduct(e.id)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params;e.match.params.id!==t.id&&this.props.detailProduct(t.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.details;return t.isLoading?r.a.createElement(Ne,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.props.history.push("/products")}},r.a.createElement("i",{className:"fa fa-chevron-left fa-lg mr-2"}),"Back"),r.a.createElement("div",{className:"row shadow"},r.a.createElement(Me,{image:a.product.image,feeds:a.feeds}),r.a.createElement(He,{product:a.product}),r.a.createElement(Ke,{company:a.company})),r.a.createElement("div",{className:"row"},r.a.createElement(We,{description:a.product.full_description})),r.a.createElement("div",{className:"row"},r.a.createElement(ze,{products:a.other_products})))}}]),t}(n.Component),qe=Object(m.b)((function(e){return{details:e.productsReducer.details,isLoading:e.productsReducer.isLoading}}),(function(e){return{detailProduct:function(t){return e(de(t))}}}))(Je),Be=a(148),$e=function(){var e=_e(),t=Object(i.a)(e,2),a=t[0],c=t[1],l=_e(),o=Object(i.a)(l,2),s=o[0],u=o[1],d=_e(),p=Object(i.a)(d,2),f=p[0],E=p[1],g=Object(n.useState)(""),b=Object(i.a)(g,2),h=b[0],N=b[1],v=Object(m.d)((function(e){return e.authReducer})),y=Object(J.g)(),O=Object(m.c)();Object(n.useEffect)((function(){v.isPasswordUpdated&&(O(ee(v.token)),y.push("/login"))}),[v.isPasswordUpdated]);var j=function(){return N("")};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s===f?O(te(v.token,{oldPassword:a,newPassword:s,confirmPassword:f})):N("Password does not match")}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Old Password"),r.a.createElement(Be.a,Object.assign({type:"password",placeholder:"Your old password"},c,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"New Password"),r.a.createElement(Be.a,Object.assign({type:"password",placeholder:"At least 4 character"},u,{minLength:"4",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(Be.a,Object.assign({onBlur:j,onInput:j,type:"password",placeholder:"At least 4 character"},E,{minLength:"4",required:!0})),r.a.createElement("div",{className:"error-input"},h)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-danger btn-lg btn-block"},r.a.createElement("i",{className:"fa fa-key mr-2"}),"Update password"))))))},Ve=a(74),Qe=a.n(Ve),Xe=function(){var e=Object(m.d)((function(e){return e.userReducer})),t=Object(m.d)((function(e){return e.authReducer})),a=Object(m.c)(),c=Object(J.g)(),l=Object(n.useRef)(null);Object(n.useEffect)((function(){l.current.value=e.email,!t.isLogin&&c.push("/login")}),[e.email,t.isLogin]);var o=_e(e.firstName),s=Object(i.a)(o,2),u=s[0],d=s[1],p=_e(e.lastName),f=Object(i.a)(p,2),E=f[0],b=f[1],h=_e(e.city),N=Object(i.a)(h,2),v=N[0],y=N[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={firstName:u,lastName:E,city:v};a(function(e,t){var a={first_name:t.firstName,last_name:t.lastName,city:t.city};return function(t){return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(Q(e,a).then((function(a){t({type:"UPDATE_PROFILE"}),t(X(e)),Promise.resolve(a)})).catch((function(e){return console.log({err:e})})));case 2:case"end":return n.stop()}}))}}(t.token,n)).then((function(e){c.push("user")}))}},r.a.createElement("div",{className:"row text-center"},r.a.createElement("img",{className:"mb-3 w-25 rounded-circle mx-auto",src:Qe.a,alt:"missing"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12 col-md-10 offset-md-1 px-0"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",ref:l,defaultValue:"Loading...",className:"form-control",readOnly:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"First name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: John",type:"text"},d,{autoFocus:!0,required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Last name"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Doe",type:"text"},b,{required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"City"),r.a.createElement("input",Object.assign({className:"form-control",placeholder:"Ex: Can Tho",type:"text"},y))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-success btn-block"},r.a.createElement("i",{className:"fa fa-pencil-square-o mr-2"}),"Update profile"))))))},Ye=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-md-6 offset-sm-2 offset-md-3"},r.a.createElement("div",{className:"card text-center"},r.a.createElement("div",{className:"card-header bg-info text-white"},r.a.createElement("strong",null,"Update your information")),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement(Xe,null),r.a.createElement($e,null))))))};var Ze=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.authReducer}));return Object(n.useEffect)((function(){t.isLogin&&e(G(t.token))}),[t.isLogin]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null),r.a.createElement(xe,null,r.a.createElement(J.d,null,r.a.createElement(J.a,{exact:!0,from:"/",to:"/products/All"}),r.a.createElement(J.a,{exact:!0,from:"/products",to:"/products/All"}),r.a.createElement(J.b,{path:"/products/:category",exact:!0,component:ke}),r.a.createElement(J.b,{path:"/products/:id/detail",exact:!0,component:qe}),r.a.createElement(J.b,{path:"/login",exact:!0,component:Ce}),r.a.createElement(J.b,{path:"/signup",exact:!0,component:Re}),r.a.createElement(J.b,{path:"/cart",exact:!0,component:Te}),r.a.createElement(J.b,{path:"/user",exact:!0,component:Ie}),r.a.createElement(J.b,{path:"/update-user",exact:!0,component:Ye}),r.a.createElement(J.b,{path:"/checkout",exact:!0},r.a.createElement(De.Elements,null,r.a.createElement(Ge,null))),r.a.createElement(J.b,{path:"*",exact:!0,component:Fe}))))},et=a(28),tt=a(49),at={isLoading:!0,currentSelected:{id:-1,name:"All"},categories:[{id:-1,name:"All"}]},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CATEGORIES":return Object($.a)({},e,{isLoading:!1,categories:[].concat(Object(tt.a)(at.categories),Object(tt.a)(t.payload))});case"CHANGE_SELECTED_CATEGORY":return Object($.a)({},e,{currentSelected:t.payload.category});default:return e}},rt={isLoading:!0,products:[],hasError:!1,details:{feeds:[],other_products:[],product:{tag:"",name:"",rating:0,price:0,description:"",model:"",category:[],color:"",favorites:0},company:{logo:null,store_name:"",address:"",phone_number:"",productgroup:[],social_link:{facebook:"",instagram:"",twitter:""}}}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_PENDING":return Object($.a)({},e,{isLoading:!0});case"FETCH_PRODUCTS":case"SEARCH_PRODUCTS":return Object($.a)({},e,{isLoading:!1,products:t.payload});case"DETAIL_PRODUCT":return Object($.a)({},e,{isLoading:!1,details:t.payload.details});default:return e}},lt={isPending:!1,id:null,total:0,status:null,user:null,paid_at:null,cart_detail:[]},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_PENDING":return Object($.a)({},e,{isPending:!0});case"FETCH_CART":case"ADD_TO_CART":case"UPDATE_CART_ITEM":case"DELETE_CART_ITEM":case"CLEAR_CART":return Object($.a)({},e,{isPending:!1},t.payload.cart);case"CHECK_OUT_OK":return Object($.a)({},e,{cart_detail:[],total:0,paid_at:(new Date).toISOString()});case"CHECK_OUT_FAILED":return Object($.a)({},e);case"LOGOUT":return lt;default:return e}},st={id:null,firstName:null,lastName:null,email:null,username:null,stripeID:null,city:null},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;if(t.payload&&t.payload.profile)var a=t.payload.profile,n={id:a.id,firstName:a.first_name,lastName:a.last_name,email:a.email,username:a.username,stripeID:a.stripe_customer_id,city:a.city};switch(t.type){case"AUTH_USER":case"GET_USER_PROFILE":return Object($.a)({},e,{},n);case"LOGOUT":return Object($.a)({},st);default:return e}},mt={currentPage:1,pageSize:20,count:0,totalPages:0,next:null,previous:null},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PAGINATION":var a=t.payload.page;return Object($.a)({},e,{count:a.count,totalPages:Math.ceil(a.count/e.pageSize),next:a.next,previous:a.previous});case"NEXT_PAGE":return Object($.a)({},e,{currentPage:e.currentPage+1});case"PREVIOUS_PAGE":return Object($.a)({},e,{currentPage:e.currentPage-1});case"GO_TO_PAGE":return Object($.a)({},e,{currentPage:t.payload.page_number});default:return e}},dt={isAuthPending:!1,isPasswordUpdated:!1,token:null,isLogin:null,regiterSuccess:null,registerError:null,loginError:null,passwordError:null},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return Object($.a)({},e,{token:t.payload.token,isLogin:!0});case"REGISTER_OK":return Object($.a)({},e,{registerSuccess:t.payload.success});case"REGISTER_FAILED":return Object($.a)({},e,{registerError:t.payload.error});case"LOGIN_OK":return Object($.a)({},e,{isAuthPending:!1,isPasswordUpdated:!1,isLogin:!0,token:t.payload.token});case"LOGIN_FAILED":return Object($.a)({},e,{loginError:t.payload.error});case"LOGOUT":return Object($.a)({},dt);case"UPDATE_PASSWORD_OK":return Object($.a)({},e,{isPasswordUpdated:!0});case"UPDATE_PASSWORD_FAILED":return Object($.a)({},e,{passwordError:t.payload.error});case"TOKEN_EXPIRED":return Object($.a)({},dt);default:return e}},ft=Object(et.combineReducers)({categoriesReducer:nt,productsReducer:ct,cartReducer:ot,userReducer:it,paginationReducer:ut,authReducer:pt}),Et=a(75),gt=a(76),bt=Object(et.createStore)(ft,Object(gt.composeWithDevTools)(Object(et.applyMiddleware)(Et.a))),ht=a(36);a(141),a(138),a(142);l.a.render(r.a.createElement(m.a,{store:bt},r.a.createElement(q.a,null,r.a.createElement(De.StripeProvider,{apiKey:"pk_test_7X4at47jVmUqka7N8HhdO35N"},r.a.createElement(Ze,null)))),document.getElementById("root")),!ht.apps.length&&ht.initializeApp({apiKey:"AIzaSyDHdEhhWGoFJmuNMbNQ4KcjFhz8dp01kEI",authDomain:"seek-product-nextjs.firebaseapp.com",databaseURL:"https://seek-product-nextjs.firebaseio.com",projectId:"seek-product-nextjs",storageBucket:"seek-product-nextjs.appspot.com",messagingSenderId:"124533210035",appId:"1:124533210035:web:a094f0ba4388fbef1ea9c6",measurementId:"G-NP0LJ444E7"}),ht.messaging().onMessage((function(e){console.log("RECEIVED",e)})),console.log("FIREBASE initialized"),localStorage.getItem("notification-token")||(console.log("call"),function(){var e,t;g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,null===localStorage.getItem("notification-token")){a.next=3;break}return a.abrupt("return");case 3:return e=ht.messaging(),a.next=6,g.a.awrap(e.requestPermission());case 6:return e.usePublicVapidKey("BMk-NokF8Qd5iXnEn2-4VdIVMc_F182oK7rQtxht8_SIebci16UapymUryPebMiTcNGhsazUNk_2cPDRIzINh4k"),a.next=9,g.a.awrap(e.getToken());case 9:return t=a.sent,console.log("FB token",t),localStorage.setItem("notification-token",t),a.abrupt("return",t);case 15:a.prev=15,a.t0=a.catch(0),console.log(a.t0);case 18:case"end":return a.stop()}}),null,null,[[0,15]])}()),bt.dispatch(function(){var e=re();return e?function(t){V(e).then((function(a){t({type:"AUTH_USER",payload:{profile:a.data,token:e}})})).catch((function(e){console.log({err:e}),t({type:"TOKEN_EXPIRED"}),ae()}))}:{type:"TOKEN_NOT_FOUND"}}()),bt.subscribe((function(){var e=bt.getState().cartReducer,t=localStorage.getItem("user-cart");JSON.stringify(e)!==t&&z(e)})),function(e){if("serviceWorker"in navigator){if(new URL("/ShoppingCart-ReactJs-Redux",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ShoppingCart-ReactJs-Redux","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},73:function(e,t,a){e.exports=a.p+"static/media/user.63352dbf.png"},74:function(e,t,a){e.exports=a.p+"static/media/user.552c272e.jpg"},78:function(e,t,a){e.exports=a(140)},81:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.0516ffd3.chunk.js.map